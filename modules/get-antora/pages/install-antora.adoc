= 안토라 설치

Antora로 문서 사이트를 생성하고 게시하려면 Antora 명령줄 인터페이스(CLI)와 공식 Antora 사이트 생성기 또는 사용자 정의 생성기가 필요합니다. 이 페이지에서는 기본 구성을 사용하여 Antora를 설치하는 방법을 설명합니다.

가정:

- Linux, Windows 또는 macOS 시스템에 활성 Node.js LTS 릴리스를 설치했습니다.

이 페이지에서 배울 내용:

- Antora를 설치하지 않고 실행하는 방법.
- Antora를 로컬로 설치하는 방법(권장).
- Antora CLI 및 사이트 생성기 패키지를 전역으로 설치하는 방법.

== 설치 전에 먼저 사용해 보기

Antora를 평가하는 중이라면 npx를 사용하여 설치하지 않고도 실행할 수 있습니다.

[source,console]
----
$ npx antora -v
----

Node.js에서 제공하는 npx 명령은 로컬 또는 원격 npm 패키지에서 직접 명령을 실행할 수 있습니다. 필요한 패키지가 로컬 프로젝트 종속성에 없는 경우 npx는 명령을 실행하기 전에 캐시 폴더(일반적으로 _$HOME/.npm/_npx_)에 해당 패키지를 설치합니다. 명령 이름이 해당 명령을 제공하는 패키지의 이름과 일치하면 패키지 이름을 지정할 필요가 없습니다. 이 경우 CLI와 사이트 생성기를 번들로 제공하는 antora 패키지는 antora 명령과 실행에 필요한 종속성을 제공합니다.

패키지를 설치하지 않고 npx를 사용하는 것은 평가용으로만 사용되며 Antora를 단독으로 사용할 때만 작동합니다. 추가 패키지가 필요한 경우 npx를 실행하기 전에 Antora와 함께 해당 패키지를 설치해야 합니다.

나중에 Antora를 로컬로 설치한 경우 npx 명령을 사용하여 Antora를 실행하는 것이 좋습니다.

== 로컬 대 전역

이 페이지에서 "로컬"이라고 할 때는 플레이북 프로젝트(즉, 사이트의 플레이북 파일이 있는 디렉터리) 또는 상위 폴더 내부를 의미합니다. 특히 여러 문서 사이트를 관리하는 경우 Antora를 로컬로 설치하는 것이 좋습니다. Antora를 로컬로 설치하면 Antora 버전을 쉽게 관리할 수 있으며 Antora 버전이 플레이북이 작성된 버전과 일치하는지 확인할 수 있습니다. 또한 Antora를 전역으로 설치하려고 할 때 발생할 수 있는 권한 문제를 방지할 수 있습니다.

이 페이지에서 "전역"이라고 할 때 반드시 시스템 전체를 의미하는 것은 아닙니다. 오히려 Node.js가 설치된 위치를 의미합니다. nvm을 사용하여 Node.js를 설치한 경우 이 위치는 홈 디렉터리 내부에 있습니다(따라서 상승된 권한이 필요하지 않음). Antora 작동 방식에 익숙하고 이 설정에 만족하는 경우에만 Antora를 전역으로 설치하는 것이 좋습니다.

성공할 가능성이 가장 높은 방법은 Antora를 로컬로 설치하는 것입니다. 적어도 거기서부터 시작해야 합니다.

== Antora 로컬 설치

Antora를 로컬로 설치하려면 먼저 플레이북 프로젝트 디렉터리로 전환하세요(필요한 경우 생성). 여기서는 이 폴더의 이름이 _docs-site_라고 가정하겠습니다.

[source]
----
$ cd docs-site
----

다음으로 npx를 사용하여 antora 명령을 실행할 수 있도록 플레이북 프로젝트 내에 CLI 패키지를 설치해 보겠습니다.

[source]
----
$ node -e "fs.writeFileSync('package.json', '{}')"
$ npm i -D -E @antora/cli@3.1
----

첫 번째 명령의 대안으로 `npm init -y` 를 사용할 수 있습니다. 그러나 `npm init` 은 필요하지 않을 수 있는 많은 추가 키를 추가합니다.

`@antora/cli` 패키지와 해당 종속성은 플레이북 프로젝트 내부의 _node_modules_ 폴더에 설치됩니다. 선택적 `-D` 옵션은 npm에게 패키지를 `package.json` 의 개발 종속성으로 저장하도록 지시합니다. `-E` 옵션은 npm에게 semver 범위 연산자로 접두사를 붙이는 대신 package.json에 정확한 버전을 저장하도록 지시합니다.

[IMPORTANT]
====
패키지 이름의 시작 부분에 있는 `@` 는 `cli` 패키지가` @antora` 범위에 있음을 `npm` 에 알려줍니다. 이 문자를 생략하면 `npm` 은 패키지 이름이 GitHub의 git 리포지토리 이름이라고 가정합니다.
====

[NOTE]
====
패키지 이름의 두 번째 `@` 는 요청된 버전 번호의 시작을 지정합니다. 사전 릴리스 버전을 제외하고 주요 및 부 세그먼트만 지정할 수 있습니다(예: `@3.1`). 이렇게 하면 최신 패치 릴리스를 검색할 수 있습니다.
====

Antora를 로컬로 설치하면 antora 명령이 PATH에 배치되지 않습니다. 대신 npx를 사용하여 antora 명령을 실행합니다(즉, npx antora).

`npx antora -v` 를 실행하여 `npx` 를 통해 antora 명령을 사용할 수 있는지 확인하세요.

[source]
----
npx antora -v
----

이 명령은 터미널에 Antora CLI의 버전을 보고해야 합니다.

[source]
----
@antora/cli: 3.1.7
@antora/site-generator: not installed
----

npx 명령은 플레이북 프로젝트 내부 또는 플레이북 프로젝트의 상위 디렉터리에 설치된 antora 명령을 찾습니다. antora 패키지를 설치하라는 메시지가 표시되면 CLI를 찾을 수 없는 것입니다.

Bash를 사용하는 경우 `npx antora` 의 별칭인 `antora` 를 만들어 입력을 줄일 수 있습니다:

[source]
----
$ alias antora='npx antora'
----

이제 npx를 접두사로 붙일 필요 없이 antora를 실행할 수 있습니다:

[source]
----
$ antora -v
----

백슬래시를 명령 앞에 붙이면 이 별칭을 무시하고 대신 PATH에서 antora를 검색합니다.

[source]
----
$ \antora -v
----

npx가 antora 명령을 찾아 CLI 버전을 보고하더라도 여전히 사이트 생성기가 없습니다. 다음으로 플레이북 프로젝트 내에 사이트 생성기 패키지를 설치하세요:

[source]
----
$ npm i -D -E @antora/site-generator@3.1
----

`@antora/site-generator `패키지와 해당 종속성은 플레이북 프로젝트 내부의 node_modules 폴더에 설치됩니다. Antora의 CLI는 전역 설치 폴더를 보기 전에 먼저 이 폴더에서 사이트 생성기 패키지를 찾습니다.

이제 `npx antora -v` 를 실행하면 터미널에 Antora CLI와 사이트 생성기의 버전이 모두 출력되어야 합니다.

[source]
----
@antora/cli: 3.1.7
@antora/site-generator: 3.1.7
----

package.json을 열면 이러한 패키지의 버전도 개발 종속성으로 나열되어 있는 것을 볼 수 있습니다.

[source,json]
----
{
    "devDependencies": {
        "@antora/cli": "3.1.7",
        "@antora/site-generator": "3.1.7"
    }
}
----

`_package-lock.json_` 이라는 추가 파일도 있습니다. 이 파일은 모든 패키지와 해당 종속성의 해결된 버전을 저장합니다. package.json을 커밋할 때 이 파일을 커밋하도록 선택할 수 있습니다.

[TIP]
====
Antora를 다시 설치하는 경우 먼저 node_modules 폴더를 제거하는 것이 가장 좋습니다. 각 종속성의 최신 버전을 가져오려면 _package-lock.json_ 파일도 제거하세요. _node_modules_ 폴더를 제거하는 경우 CLI 패키지를 다시 설치해야 합니다. 다른 옵션은 npm ci를 사용하는 것입니다. 이렇게 하면 다시 설치할 때 _node_modules_가 자동으로 제거됩니다.
====

antora 명령이 CLI와 사이트 생성기의 버전을 모두 보고하고 해당 버전이 일치하면 Antora를 올바르게 설치했음을 확인할 수 있습니다.

== Antora 전역 설치

antora 명령을 PATH에서 사용할 수 있도록 Antora를 전역으로 설치하는 옵션이 있습니다. Antora를 전역으로 설치하려면 npm i에 -g 옵션을 전달하세요.

[source]
----
npm i -g @antora/cli@3.1 @antora/site-generator@3.1
----

다음을 실행하여 PATH에서 antora 명령을 사용할 수 있는지 확인하세요:

[source]
----
antora -v
----

설치가 성공하면 명령은 Antora CLI 및 사이트 생성기의 버전을 보고해야 합니다.

[source]
----
antora -v
@antora/cli: 3.1.7
@antora/site-generator: 3.1.7
----

Antora를 전역으로 설치하면 어떤 디렉터리에 있든 터미널에서 항상 사용할 수 있다는 이점이 있습니다. 처음에는 편리해 보일 수 있지만 이 전략에는 문제가 있습니다. 설치한 Antora 버전이 문서 사이트가 만들어진 Antora 버전과 일치하지 않을 수 있습니다. 그리고 Antora나 문서 사이트에서 이것이 동일한지 확인할 방법이 없습니다. 그래서 난해한 문제에 부딪히고 동기화하는 데 어려움을 겪을 수 있습니다. Antora를 로컬로 설치하고 npx를 사용하여 실행하면 가장 성공적이고 호환 가능할 것입니다.

[CAUTION]
====
운영 체제의 패키지 관리자에서 관리하는 시스템 전체 Node.js 설치를 사용하는 경우 전역으로 패키지를 설치할 때 권한 문제가 발생할 수 있습니다. 이 경우 프로젝트 리포지토리에 Antora를 직접 설치해야 합니다.
====

== 더 알아보기

이제 Antora가 설치되었으니 다음을 수행할 준비가 되었습니다:

- 자체 플레이북을 설정하거나 데모 플레이북을 사용하세요.
- 콘텐츠 소스 파일 및 리포지토리를 구성하거나 Antora의 데모 콘텐츠 리포지토리를 사용하세요.
- Antora를 실행하고 문서 사이트를 생성하세요.